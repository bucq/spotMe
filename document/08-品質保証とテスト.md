# 08 - å“è³ªä¿è¨¼ã¨ãƒ†ã‚¹ãƒˆ

> [[07-UI-UXè¨­è¨ˆ]] | [[BondPointè¨­è¨ˆæ›¸]] | Next: [[09-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼]]

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰
```
         ğŸ”º E2E Tests (10%)
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       ğŸ”ºğŸ”º Integration Tests (20%)
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ğŸ”ºğŸ”ºğŸ”º Unit Tests (70%)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### å“è³ªç›®æ¨™
- **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: 80%ä»¥ä¸Š
- **E2Eãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãƒ•ãƒ­ãƒ¼100%
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 2ç§’ä»¥å†…ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **å¯ç”¨æ€§**: 99.9%ç¨¼åƒç‡

---

## ğŸ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

### å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ70%ï¼‰

#### ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **pytest**: ãƒ¡ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **pytest-asyncio**: éåŒæœŸãƒ†ã‚¹ãƒˆ
- **pytest-cov**: ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
- **factory_boy**: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¯ãƒˆãƒª

#### ãƒ†ã‚¹ãƒˆä¾‹ï¼šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°API

```python
import pytest
from fastapi.testclient import TestClient
from app.main import app
from app.models import UserStatus

client = TestClient(app)

class TestStatusAPI:
    """ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°APIã®ãƒ†ã‚¹ãƒˆ"""

    @pytest.fixture
    def auth_headers(self, test_user):
        """èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ã®æº–å‚™"""
        token = create_access_token(test_user.id)
        return {"Authorization": f"Bearer {token}"}

    def test_update_status_success(self, auth_headers, test_event):
        """æ­£å¸¸ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°"""
        payload = {
            "status_type": "ON_TRAIN",
            "custom_message": "å±±æ‰‹ç·šã§å‘ã‹ã„ã¾ã™",
            "latitude": 35.681236,
            "longitude": 139.767125
        }
        
        response = client.post(
            f"/api/v1/events/{test_event.id}/status",
            json=payload,
            headers=auth_headers
        )
        
        assert response.status_code == 200
        data = response.json()
        assert data["status_type"] == "ON_TRAIN"
        assert data["custom_message"] == "å±±æ‰‹ç·šã§å‘ã‹ã„ã¾ã™"
        assert "estimated_arrival_time" in data

    def test_update_status_invalid_type(self, auth_headers, test_event):
        """ç„¡åŠ¹ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ã‚¤ãƒ—"""
        payload = {"status_type": "INVALID_STATUS"}
        
        response = client.post(
            f"/api/v1/events/{test_event.id}/status",
            json=payload,
            headers=auth_headers
        )
        
        assert response.status_code == 400
        assert "VALIDATION_ERROR" in response.json()["error"]["code"]

    def test_update_status_unauthorized(self, test_event):
        """èªè¨¼ãªã—ã‚¢ã‚¯ã‚»ã‚¹"""
        payload = {"status_type": "ON_TRAIN"}
        
        response = client.post(
            f"/api/v1/events/{test_event.id}/status",
            json=payload
        )
        
        assert response.status_code == 401

    @pytest.mark.asyncio
    async def test_firestore_sync(self, test_user, test_event):
        """Firestoreã¨ã®åŒæœŸãƒ†ã‚¹ãƒˆ"""
        status_data = {
            "status_type": "ARRIVED",
            "user_id": test_user.id
        }
        
        # PostgreSQLã¸ã®ä¿å­˜
        await update_status_in_postgres(test_event.id, test_user.id, status_data)
        
        # Firestoreã¸ã®åŒæœŸç¢ºèª
        firestore_data = await get_status_from_firestore(test_event.id, test_user.id)
        assert firestore_data["status_type"] == "ARRIVED"
```

### çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ20%ï¼‰

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆãƒ†ã‚¹ãƒˆ

```python
class TestDatabaseIntegration:
    """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆãƒ†ã‚¹ãƒˆ"""

    @pytest.mark.asyncio
    async def test_status_update_flow(self, test_db, test_user, test_event):
        """ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼"""
        # 1. åˆæœŸçŠ¶æ…‹ç¢ºèª
        initial_status = await get_user_status(test_event.id, test_user.id)
        assert initial_status is None
        
        # 2. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä½œæˆ
        new_status = await create_user_status(
            event_id=test_event.id,
            user_id=test_user.id,
            status_type="HOME_DEPARTED"
        )
        assert new_status.status_type == "HOME_DEPARTED"
        
        # 3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
        updated_status = await update_user_status(
            event_id=test_event.id,
            user_id=test_user.id,
            status_data={"status_type": "ON_TRAIN"}
        )
        assert updated_status.status_type == "ON_TRAIN"
        
        # 4. å±¥æ­´ç¢ºèª
        status_history = await get_status_history(test_event.id, test_user.id)
        assert len(status_history) == 2
```

### è² è·ãƒ†ã‚¹ãƒˆ

#### Locust ã«ã‚ˆã‚‹è² è·ãƒ†ã‚¹ãƒˆ

```python
from locust import HttpUser, task, between

class BondPointUser(HttpUser):
    wait_time = between(1, 3)
    
    def on_start(self):
        """ãƒ†ã‚¹ãƒˆé–‹å§‹æ™‚ã®èªè¨¼"""
        response = self.client.post("/api/v1/auth/login", json={
            "phone_number": "+81-90-1234-5678",
            "password": "test_password"
        })
        self.token = response.json()["access_token"]
        self.headers = {"Authorization": f"Bearer {self.token}"}
    
    @task(3)
    def view_events(self):
        """ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§å–å¾—ï¼ˆé«˜é »åº¦ï¼‰"""
        self.client.get("/api/v1/events", headers=self.headers)
    
    @task(2)
    def view_status(self):
        """ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªï¼ˆä¸­é »åº¦ï¼‰"""
        event_id = "test-event-id"
        self.client.get(f"/api/v1/events/{event_id}/statuses", headers=self.headers)
    
    @task(1)
    def update_status(self):
        """ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ï¼ˆä½é »åº¦ï¼‰"""
        event_id = "test-event-id"
        self.client.post(
            f"/api/v1/events/{event_id}/status",
            json={"status_type": "ON_TRAIN"},
            headers=self.headers
        )
```

#### è² è·ãƒ†ã‚¹ãƒˆç›®æ¨™

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|----------|
| **åŒæ™‚ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°** | 1,000äºº | Locust |
| **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“** | P95 < 500ms | Cloud Monitoring |
| **ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ** | 100 req/sec | Locust |
| **ã‚¨ãƒ©ãƒ¼ç‡** | < 1% | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚° |

---

## ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

### å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆJest + React Testing Libraryï¼‰

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆä¾‹

```typescript
import React from 'react';
import { render, fireEvent, waitFor } from '@testing-library/react-native';
import StatusSelector from '../components/StatusSelector';

describe('StatusSelector', () => {
  const mockOnStatusChange = jest.fn();
  
  beforeEach(() => {
    mockOnStatusChange.mockClear();
  });

  test('ãƒ—ãƒªã‚»ãƒƒãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    const { getByText } = render(
      <StatusSelector onStatusChange={mockOnStatusChange} />
    );
    
    // å„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒœã‚¿ãƒ³ã®å­˜åœ¨ç¢ºèª
    expect(getByText('ğŸ  æœªå‡ºç™º')).toBeTruthy();
    expect(getByText('ğŸš¶ å®¶ã‚’å‡ºãŸ')).toBeTruthy();
    expect(getByText('ğŸš‰ é§…åˆ°ç€')).toBeTruthy();
    expect(getByText('ğŸšƒ é›»è»Šä¹—è»Šä¸­')).toBeTruthy();
  });

  test('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é¸æŠæ™‚ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå‘¼ã°ã‚Œã‚‹', async () => {
    const { getByText } = render(
      <StatusSelector onStatusChange={mockOnStatusChange} />
    );
    
    // ã€Œé›»è»Šä¹—è»Šä¸­ã€ã‚’ã‚¿ãƒƒãƒ—
    fireEvent.press(getByText('ğŸšƒ é›»è»Šä¹—è»Šä¸­'));
    
    await waitFor(() => {
      expect(mockOnStatusChange).toHaveBeenCalledWith({
        status_type: 'ON_TRAIN',
        status_display: 'ğŸšƒ é›»è»Šä¹—è»Šä¸­'
      });
    });
  });

  test('ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‹ã', async () => {
    const { getByText, getByPlaceholderText } = render(
      <StatusSelector onStatusChange={mockOnStatusChange} />
    );
    
    // ã‚«ã‚¹ã‚¿ãƒ ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
    fireEvent.press(getByText('ğŸ’¬ ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'));
    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®è¡¨ç¤ºç¢ºèª
    await waitFor(() => {
      expect(getByPlaceholderText('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...')).toBeTruthy();
    });
  });
});
```

### E2Eãƒ†ã‚¹ãƒˆï¼ˆDetoxï¼‰

#### ä¸»è¦ãƒ•ãƒ­ãƒ¼ã®E2Eãƒ†ã‚¹ãƒˆ

```typescript
describe('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ãƒ•ãƒ­ãƒ¼', () => {
  beforeAll(async () => {
    await device.launchApp();
  });

  beforeEach(async () => {
    await device.reloadReactNative();
  });

  test('ãƒ­ã‚°ã‚¤ãƒ³â†’ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°â†’ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°', async () => {
    // 1. ãƒ­ã‚°ã‚¤ãƒ³
    await element(by.id('phone-input')).typeText('+81-90-1234-5678');
    await element(by.id('login-button')).tap();
    
    // SMSèªè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›ï¼ˆãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯å›ºå®šå€¤ï¼‰
    await element(by.id('code-input')).typeText('123456');
    await element(by.id('verify-button')).tap();
    
    // 2. ãƒ›ãƒ¼ãƒ ç”»é¢ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚¿ãƒƒãƒ—
    await waitFor(element(by.id('event-card-0'))).toBeVisible().withTimeout(5000);
    await element(by.id('event-card-0')).tap();
    
    // 3. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—
    await element(by.id('status-tab')).tap();
    
    // 4. ã€Œé›»è»Šä¹—è»Šä¸­ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é¸æŠ
    await element(by.id('status-ON_TRAIN')).tap();
    
    // 5. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã®ç¢ºèª
    await waitFor(element(by.text('ğŸšƒ é›»è»Šä¹—è»Šä¸­'))).toBeVisible();
    
    // 6. ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç”»é¢ã§ã‚‚åæ˜ ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    // ï¼ˆãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  });

  test('ä½ç½®æƒ…å ±å…±æœ‰ã®ON/OFF', async () => {
    // äº‹å‰æ¡ä»¶ï¼šãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã€ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢
    await navigateToEventStatus();
    
    // ä½ç½®æƒ…å ±å…±æœ‰ã‚’ON
    await element(by.id('location-toggle')).tap();
    
    // æ¨©é™ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§è¨±å¯
    await element(by.text('è¨±å¯')).tap();
    
    // ä½ç½®æƒ…å ±ãŒå…±æœ‰ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    await waitFor(element(by.id('location-shared-indicator'))).toBeVisible();
    
    // ä½ç½®æƒ…å ±å…±æœ‰ã‚’OFF
    await element(by.id('location-toggle')).tap();
    
    // ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§OFFã‚’é¸æŠ
    await element(by.text('å…±æœ‰ã‚’åœæ­¢')).tap();
    
    // ä½ç½®æƒ…å ±ãŒéè¡¨ç¤ºã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª
    await waitFor(element(by.id('location-shared-indicator'))).not.toBeVisible();
  });
});
```

---

## ğŸ”„ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

### GitHub Actionsè¨­å®š

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  backend-test:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python 3.12
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install -r requirements-dev.txt
    
    - name: Run linting
      run: |
        ruff check .
        mypy .
    
    - name: Run tests
      run: |
        pytest --cov=app --cov-report=xml
      env:
        DATABASE_URL: postgresql://postgres:postgres@localhost/test_db
    
    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v3

  frontend-test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run linting
      run: npm run lint
    
    - name: Run type checking
      run: npm run type-check
    
    - name: Run unit tests
      run: npm run test:unit
    
    - name: Run E2E tests
      run: npm run test:e2e

  deploy-staging:
    needs: [backend-test, frontend-test]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Deploy to Cloud Run (Staging)
      run: |
        gcloud run deploy bondpoint-api-staging \
          --source . \
          --region asia-northeast1 \
          --project ${{ secrets.GCP_PROJECT_ID }}
```

### å“è³ªã‚²ãƒ¼ãƒˆ

| ã‚¹ãƒ†ãƒ¼ã‚¸ | å¿…é ˆæ¡ä»¶ | å¤±æ•—æ™‚ã®å¯¾å¿œ |
|----------|----------|------------|
| **Lint** | ã‚¨ãƒ©ãƒ¼0ä»¶ | è‡ªå‹•ä¿®æ­£å¯èƒ½ãªã‚‚ã®ã¯ä¿®æ­£ |
| **Unit Tests** | ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š | ãƒ†ã‚¹ãƒˆè¿½åŠ  |
| **Integration Tests** | æˆåŠŸç‡100% | æ ¹æœ¬åŸå› èª¿æŸ» |
| **E2E Tests** | ä¸»è¦ãƒ•ãƒ­ãƒ¼100%æˆåŠŸ | æ‰‹å‹•ç¢ºèªå¾Œä¿®æ­£ |
| **Security Scan** | é«˜ãƒªã‚¹ã‚¯è„†å¼±æ€§0ä»¶ | ä¾å­˜é–¢ä¿‚æ›´æ–° |

---

## ğŸ“Š å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸ | æ¸¬å®šãƒ„ãƒ¼ãƒ« |
|----------|-------------|----------|
| **APIå±¤** | 90%ä»¥ä¸Š | pytest-cov |
| **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤** | 95%ä»¥ä¸Š | pytest-cov |
| **ãƒ‡ãƒ¼ã‚¿å±¤** | 80%ä»¥ä¸Š | pytest-cov |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | 75%ä»¥ä¸Š | Jest |

### ç¶™ç¶šçš„å“è³ªç›£è¦–

#### SonarQubeè¨­å®š
```properties
# sonar-project.properties
sonar.projectKey=bondpoint
sonar.projectName=BondPoint
sonar.projectVersion=1.0

# Pythonè¨­å®š
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.xunit.reportPath=test-reports/*.xml

# TypeScriptè¨­å®š
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# å“è³ªã‚²ãƒ¼ãƒˆ
sonar.qualitygate.wait=true
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

#### ç›®æ¨™ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| API | ç›®æ¨™ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ | æœ€å¤§ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ |
|-----|---------------|------------------|
| **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°** | < 200ms | < 500ms |
| **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—** | < 100ms | < 300ms |
| **ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§** | < 150ms | < 400ms |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼** | < 300ms | < 800ms |

#### ç¶™ç¶šçš„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

```python
# performance_test.py
def test_status_update_performance():
    """ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ"""
    start_time = time.time()
    
    response = client.post("/api/v1/events/test-event/status", 
                          json={"status_type": "ON_TRAIN"})
    
    end_time = time.time()
    response_time = (end_time - start_time) * 1000  # ms
    
    assert response.status_code == 200
    assert response_time < 200  # 200msä»¥ä¸‹
```

---

## ğŸ› ãƒã‚°ç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹

### é‡è¦åº¦åˆ†é¡

| é‡è¦åº¦ | èª¬æ˜ | å¯¾å¿œæœŸé™ | ä¾‹ |
|--------|------|----------|----|
| **Critical** | ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ | 2æ™‚é–“ä»¥å†… | ãƒ­ã‚°ã‚¤ãƒ³ä¸å¯ã€ãƒ‡ãƒ¼ã‚¿æ¶ˆå¤± |
| **High** | ä¸»è¦æ©Ÿèƒ½åœæ­¢ | 24æ™‚é–“ä»¥å†… | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ä¸å¯ |
| **Medium** | ä¸€éƒ¨æ©Ÿèƒ½ã«å½±éŸ¿ | 1é€±é–“ä»¥å†… | ä½ç½®æƒ…å ±è¡¨ç¤ºä¸æ­£ |
| **Low** | è»½å¾®ãªå•é¡Œ | æ¬¡å›ãƒªãƒªãƒ¼ã‚¹ | UIè¡¨ç¤ºå´©ã‚Œ |

### ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
## ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆ

### åŸºæœ¬æƒ…å ±
- **ç™ºè¦‹æ—¥æ™‚**: 2025-09-29 15:30
- **å ±å‘Šè€…**: ç”°ä¸­
- **é‡è¦åº¦**: High
- **ç’°å¢ƒ**: iOS 17.1 / iPhone 14

### ç¾è±¡
- **æœŸå¾…ã™ã‚‹å‹•ä½œ**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°å¾Œã€ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å³åº§åæ˜ 
- **å®Ÿéš›ã®å‹•ä½œ**: 5åˆ†ä»¥ä¸Šåæ˜ ã•ã‚Œãªã„
- **å†ç¾ç‡**: 3/5å›

### å†ç¾æ‰‹é †
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼AãŒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã€Œé›»è»Šä¹—è»Šä¸­ã€ã«æ›´æ–°
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼Bã®ç”»é¢ã§ç¢ºèª
3. 5åˆ†çµŒã£ã¦ã‚‚æ›´æ–°ã•ã‚Œãªã„

### é–¢é€£ãƒ­ã‚°ãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- Cloud Logging: [ãƒªãƒ³ã‚¯]
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ: [æ·»ä»˜]

### å½±éŸ¿ç¯„å›²
- **å½±éŸ¿ãƒ¦ãƒ¼ã‚¶ãƒ¼**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **å›é¿ç­–**: ã‚¢ãƒ—ãƒªå†èµ·å‹•ã§è§£æ±º
```

---

**Next**: [[09-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼]] - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆã¨å€‹äººæƒ…å ±ä¿è­·