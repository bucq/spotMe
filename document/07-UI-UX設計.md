# 07 - UI/UX設計

> [[06-API設計]] | [[spotMe設計書]] | Next: [[08-品質保証とテスト]]

## 🎨 UI/UX設計原則

### コンセプト
**「3タップ以内で、みんなの状況が分かる」**

### デザイン原則
- **シンプルファースト**: 学習コストの最小化
- **直感的操作**: アイコンと色で瞬時に判断
- **リアルタイム感**: 動的な更新の視覚的フィードバック
- **段階的開示**: 必要な情報のみ段階的に表示

---

## 📱 主要画面一覧

| 画面名 | 優先度 | 主な機能 | 画面遷移 |
|--------|--------|----------|----------|
| **スプラッシュ** | P0 | アプリ起動・初期化 | → ログイン or ホーム |
| **ログイン/登録** | P0 | 電話番号認証 | → ホーム |
| **ホーム** | P0 | グループ・イベント一覧 | ハブ画面 |
| **グループ作成** | P0 | グループ情報入力 | ← ホーム |
| **グループ詳細** | P0 | メンバー、イベント表示 | ← ホーム |
| **イベント作成** | P0 | イベント情報入力 | ← グループ詳細 |
| **イベント詳細** | P0 | 出欠、経路、チャット | ← グループ詳細 |
| **⭐ ステータス画面** | P0 | **ステータス選択・表示** | ← イベント詳細 |
| **経路表示** | P1 | Google Maps連携 | ← イベント詳細 |
| **リアルタイムマップ** | P1 | メンバー位置表示 | ← イベント詳細 |
| **チャット** | P1 | グループメッセージング | ← イベント詳細 |
| **プロフィール** | P1 | ユーザー情報編集 | ← ホーム |

---

## ⭐ ステータス画面設計（コア機能）

### レイアウト構成

```
┌─────────────────────────────────────┐
│ ← 飲み会 @渋谷               📍    │ ← ヘッダー
├─────────────────────────────────────┤
│                                     │
│ 現在の状況を共有 📤                │
│                                     │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│ │ 🏠  │ │ 🚶  │ │ 🚉  │ │ 🚃  │  │ ← プリセット
│ │ 未  │ │ 家  │ │ 駅  │ │ 電  │  │   ステータス
│ │ 出  │ │ を  │ │ 到  │ │ 車  │  │   (4つずつ
│ │ 発  │ │ 出  │ │ 着  │ │ 中  │  │    2行表示)
│ └─────┘ └─────┘ └─────┘ └─────┘  │
│                                     │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│ │ 🔄  │ │ ⏱️  │ │ ✅  │ │ ⚠️  │  │
│ │ 乗  │ │ 到  │ │ 到  │ │ 遅  │  │
│ │ 換  │ │ 着  │ │ 着  │ │ 延  │  │
│ │ 中  │ │ 間  │ │ 済  │ │ 中  │  │
│ └─────┘ └─────┘ └─────┘ └─────┘  │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 💬 カスタムメッセージを入力...   │ │ ← カスタム
│ └─────────────────────────────────┘ │   メッセージ
│                                     │
├─────────────────────────────────────┤
│ メンバーの状況 👥 (4/5人)          │ ← セクション
│                                     │   ヘッダー
│ ┌─────────────────────────────────┐ │
│ │ 👤 山田太郎                 🟢  │ │ ← ステータス
│ │ 🚃 電車乗車中                   │ │   カード
│ │ 📍 予定通り • 19:45到着予定      │ │
│ │ 🕐 2分前更新                    │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 👤 佐藤花子                 🔴  │ │
│ │ ⚠️ 遅延中                       │ │
│ │ 💬 「電車が遅れてます😭」         │ │
│ │ 📍 20:10到着予定 • 🕐 1分前更新  │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 👤 田中次郎                 🟢  │ │
│ │ ✅ 到着済み                     │ │
│ │ 💬 「先に席確保してます🍺」       │ │
│ │ 📍 渋谷駅付近 • 🕐 5分前更新     │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 👤 鈴木みか                 ⚫  │ │
│ │ 🏠 未出発                       │ │
│ │ 📍 ステータス更新なし             │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### ステータスカード詳細設計

#### アクティブユーザー（緑色）
```
┌─────────────────────────────────────┐
│ 👤 山田太郎                     🟢  │ ← ユーザー名 + オンライン状態
│ 🚃 電車乗車中                       │ ← ステータス（アイコン + テキスト）
│ ─────────────────────────────────── │ ← 区切り線
│ 📍 予定通り • 19:45到着予定          │ ← 位置/予定情報
│ 🕐 2分前更新                        │ ← 最終更新時刻
└─────────────────────────────────────┘
```

#### 遅延ユーザー（赤色）
```
┌─────────────────────────────────────┐
│ 👤 佐藤花子                     🔴  │
│ ⚠️ 遅延中                           │
│ ─────────────────────────────────── │
│ 💬 「電車が遅れてます😭」             │ ← カスタムメッセージ
│ 📍 20:10到着予定 • 🕐 1分前更新      │
└─────────────────────────────────────┘
```

#### 到着済みユーザー（緑色・特別表示）
```
┌─────────────────────────────────────┐
│ 👤 田中次郎                     ✅  │ ← 到着済みアイコン
│ ✅ 到着済み                         │
│ ─────────────────────────────────── │
│ 💬 「先に席確保してます🍺」           │
│ 📍 渋谷駅付近 • 🕐 5分前更新        │
└─────────────────────────────────────┘
```

#### 非アクティブユーザー（グレー）
```
┌─────────────────────────────────────┐
│ 👤 鈴木みか                     ⚫  │ ← オフライン状態
│ 🏠 未出発                           │
│ ─────────────────────────────────── │
│ 📍 ステータス更新なし                 │ ← 更新されていない状態
└─────────────────────────────────────┘
```

---

### インタラクション仕様

| 操作 | アクション | フィードバック | 結果 |
|------|------------|--------------|------|
| **ステータスタップ** | プリセット選択 | ハプティック振動 + アニメーション | 即座にステータス更新 |
| **カスタムボタンタップ** | テキスト入力モーダル | スライドアップ | カスタムメッセージ入力 |
| **ステータスカード長押し** | 詳細情報表示 | ツールチップ | 位置情報・履歴表示 |
| **プルダウン** | リフレッシュ | インジケーター | 最新情報取得 |
| **位置情報トグル** | プライバシー設定 | 確認ダイアログ | 共有設定変更 |

---

## 🏠 ホーム画面設計

### レイアウト構成

```
┌─────────────────────────────────────┐
│ spotMe        👤              ⚙️ │ ← ヘッダー（アプリ名・プロフィール・設定）
├─────────────────────────────────────┤
│                                     │
│ 今日のイベント 📅                  │ ← セクション
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 🍻 飲み会 @渋谷             今日 │ │ ← 本日イベント
│ │ 20:00 〜 • 大学の友達            │ │   カード
│ │ 👥 4/5人参加 • 📍 2/5人共有中    │ │
│ └─────────────────────────────────┘ │
│                                     │
│ グループ 👥                        │ ← セクション
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 👨‍👩‍👧‍👦 大学の友達          5人 │ │ ← グループ
│ │ 📅 次回: 明日 ランチ会           │ │   カード
│ │ 🕐 2時間前に活動                │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 👨‍👩‍👧‍👦 会社の同期          8人 │ │
│ │ 📅 来週: 歓送迎会               │ │
│ │ 🕐 1日前に活動                  │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ ➕ 新しいグループを作成           │ │ ← 作成ボタン
│ └─────────────────────────────────┘ │
│                                     │
└─────────────────────────────────────┘
│                                     │
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ │ ← タブバー
│ │🏠 │ │👥│ │📅│ │💬│ │⚙️│ │
│ │ホーム│ │群│ │予定│ │話│ │設定│ │
│ └───┘ └───┘ └───┘ └───┘ └───┘ │
└─────────────────────────────────────┘
```

---

## 🎨 デザインシステム

### カラーパレット

#### プライマリカラー
- **メインブルー**: `#007AFF` - アクション・リンク
- **アクセントグリーン**: `#34C759` - 成功・到着済み
- **警告オレンジ**: `#FF9500` - 注意・遅延予定
- **エラーレッド**: `#FF3B30` - エラー・遅延中

#### ステータスカラー
- **オンライン**: `#34C759` 🟢
- **アクティブ**: `#007AFF` 🔵
- **警告**: `#FF9500` 🟠
- **エラー**: `#FF3B30` 🔴
- **オフライン**: `#8E8E93` ⚫

#### ニュートラルカラー
- **テキスト**: `#000000` / `#FFFFFF`
- **セカンダリテキスト**: `#6D6D80`
- **背景**: `#F2F2F7` / `#000000`
- **カード背景**: `#FFFFFF` / `#1C1C1E`
- **区切り線**: `#C6C6C8` / `#38383A`

### タイポグラフィ

| 用途 | フォントサイズ | ウェイト | 行間 |
|------|-------------|---------|------|
| **大見出し** | 28pt | Bold | 32pt |
| **見出し** | 22pt | Semibold | 26pt |
| **小見出し** | 18pt | Semibold | 22pt |
| **本文** | 16pt | Regular | 20pt |
| **キャプション** | 14pt | Regular | 18pt |
| **小キャプション** | 12pt | Regular | 16pt |

### アイコンシステム

#### ステータスアイコン（32x32pt）
- 🏠 **未出発** - SF Symbols: `house.fill`
- 🚶 **家を出た** - SF Symbols: `figure.walk`
- 🚉 **駅到着** - SF Symbols: `tram.fill`
- 🚃 **電車中** - SF Symbols: `train.side.front.car`
- 🔄 **乗り換え** - SF Symbols: `arrow.triangle.2.circlepath`
- ⏱️ **到着間近** - SF Symbols: `clock.fill`
- ✅ **到着済み** - SF Symbols: `checkmark.circle.fill`
- ⚠️ **遅延中** - SF Symbols: `exclamationmark.triangle.fill`

#### ナビゲーションアイコン（24x24pt）
- 🏠 **ホーム** - SF Symbols: `house.fill`
- 👥 **グループ** - SF Symbols: `person.3.fill`
- 📅 **イベント** - SF Symbols: `calendar.fill`
- 💬 **チャット** - SF Symbols: `message.fill`
- ⚙️ **設定** - SF Symbols: `gear`

---

## 📱 レスポンシブ対応

### 画面サイズ対応

| デバイス | 画面幅 | 適用調整 |
|----------|--------|----------|
| **iPhone SE** | 375pt | ステータスボタン 3列表示 |
| **iPhone 14** | 393pt | ステータスボタン 4列表示 |
| **iPhone 14 Plus** | 428pt | 余白調整・文字サイズ拡大 |
| **iPad mini** | 744pt | 2列レイアウト |

### ダークモード対応

#### 自動切り替え
- システム設定に従う自動切り替え
- アプリ内で手動切り替え可能

#### 色調整
```swift
// ライトモード → ダークモード
背景色: #F2F2F7 → #000000
カード背景: #FFFFFF → #1C1C1E
テキスト: #000000 → #FFFFFF
区切り線: #C6C6C8 → #38383A
```

---

## ♿ アクセシビリティ対応

### VoiceOver 対応

```swift
// ステータスボタンの例
button.accessibilityLabel = "電車乗車中に変更"
button.accessibilityHint = "現在のステータスを電車乗車中に更新します"
button.accessibilityTraits = .button
```

### 読み上げ対応

| 要素 | 読み上げテキスト例 |
|------|------------------|
| **ステータスボタン** | "電車乗車中に変更" |
| **ユーザーカード** | "山田太郎さん、電車乗車中、予定通り、19時45分到着予定、2分前更新" |
| **到着予定** | "19時45分到着予定" |

### フォントサイズ対応

- **Dynamic Type** 対応
- **最大150%** まで拡大可能
- レイアウト崩れの防止

### 色覚対応

- **色だけに依存しない設計**
- アイコンとテキストの併用
- **十分なコントラスト比** (4.5:1以上)

---

## 🎭 アニメーション・マイクロインタラクション

### ステータス更新アニメーション

```swift
// ステータス変更時の視覚的フィードバック
UIView.animate(withDuration: 0.3, delay: 0, usingSpringWithDamping: 0.8, initialSpringVelocity: 0.2) {
    // ボタンの拡大縮小
    statusButton.transform = CGAffineTransform(scaleX: 1.1, y: 1.1)
} completion: { _ in
    UIView.animate(withDuration: 0.2) {
        statusButton.transform = .identity
    }
}

// 成功フィードバック
let impactFeedback = UIImpactFeedbackGenerator(style: .medium)
impactFeedback.impactOccurred()
```

### カード更新アニメーション

```swift
// 新しいステータス受信時
UIView.transition(with: statusCard, duration: 0.5, options: .transitionCrossDissolve) {
    // カード内容更新
    updateCardContent(with: newStatus)
}
```

### プルリフレッシュ

```swift
// カスタムプルリフレッシュアニメーション
let refreshControl = UIRefreshControl()
refreshControl.tintColor = .systemBlue
refreshControl.attributedTitle = NSAttributedString(string: "最新情報を取得中...")
```

---

## 🧪 A/Bテスト対象

### ステータス表示形式

**パターンA**: アイコン + 2行テキスト
```
🚃
電車
乗車中
```

**パターンB**: アイコン + 1行テキスト
```
🚃 電車乗車中
```

### カード密度

**パターンA**: 余白多め（現在の設計）
**パターンB**: 余白少なめ（情報密度高）

### 色彩パターン

**パターンA**: 現在の青基調
**パターンB**: 緑基調（自然・安心感）

---

**Next**: [[08-品質保証とテスト]] - テスト戦略とQA手法